---
title:  "np.log1pì™€ np.expm1, Feature Engineering, í¬ì†Œê°’ íƒìƒ‰"
excerpt: "11/08 ìì „ê±° ëŒ€ì—¬ ê²½ì§„ëŒ€íšŒ ë°ì´í„°ë¥¼ í™œìš©í•œ np.log1pì™€ np.expm1ë¥¼ í™œìš©í•˜ì—¬ ëª¨ë¸êµ¬ì¶•, ì˜ˆì¸¡ ë° í•™ìŠµ ì§„í–‰í•˜ê¸°, ì£¼íƒ ê°€ê²© ì˜ˆì¸¡ ê²½ì§„ëŒ€íšŒ ë°ì´í„°ë¥¼ í™œìš©í•œ Feature Engineeringê³¼ í¬ì†Œê°’ íƒìƒ‰"

categories:
  - TIL
tags:
  - python
  - EDA
  - Learning Machine
  - Hyper Parameter
  - Feature Engineering
---


# [ì§€ë‚œ í¬ìŠ¤íŒ…ì—ì„œ ì´ì–´ì§](https://junstar21.github.io/til/titanic-%ED%95%98%EC%9D%B4%ED%8D%BC%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0-%ED%8A%9C%EB%8B%9D,-Bike-Shareing-Demand-%EC%8B%A4%EC%8A%B5/)

## ì¶”ê°€ ë¶„ì„ ë° ì‹œê°í™”

```python
# seasonì€ ì‹¤ì œë¡œ ë³´ë©´ ë¶„ê¸°ë¡œ ë˜ì–´ìˆë‹¤.
sns.barplot(data = train, x = "season", y ="count", hue = "year")
```

![]({{ site.url }}{{ site.baseurl }}/assets/images/2022-11-08-np.log1pì™€ np.expm1, Feature Engineering, í¬ì†Œê°’ íƒìƒ‰/Untitled.png)

ì§€ë‚œ ì‹œê°„ì— monthë¥¼ ì‹œê°í™” í–ˆì„ ë•Œ, YoYë¡œ ë¹„êµì‹œ í° ì°¨ì´ê°€ ë³´ì´ì§€ ì•Šì•„ì„œ ì œì™¸ë¥¼ í–ˆì—ˆë‹¤. ê·¸ë ‡ë‹¤ë©´, ì—°-ì›”ì„ ê°™ì´ ë¬¶ì–´ì„œ plotí•˜ë©´ ì–´ë–¤ ë³€í™”ê°€ ìˆëŠ”ì§€ í™•ì¸ì„ í•´ë³´ì.

```python
# datetimeì„ ìŠ¬ë¼ì´ì‹±í•´ì„œ year-month columnì„ ìƒì„±

train["year-month"] = train["datetime"].astype(str).str[:7]
test["year-month"] = test["datetime"].astype(str).str[:7]

# plot
plt.figure(figsize = (24,3))
sns.barplot(data = train, x = "year-month", y = "count")
```

![]({{ site.url }}{{ site.baseurl }}/assets/images/2022-11-08-np.log1pì™€ np.expm1, Feature Engineering, í¬ì†Œê°’ íƒìƒ‰/Untitled 1.png)

ë¬¶ì€ ì—°ì›”ì„ ëª¨ë¸ì´ ì¸ì‹í•  ìˆ˜ ìˆê²Œ ì¸ì½”ë”©ì„ í•˜ë„ë¡ í•˜ì.

```python
# one-hot-encoding => pd.get_dummies(), ìˆœì„œê°€ ì—†ëŠ” ë°ì´í„°ì— ì¸ì½”ë”©
# ordinal-encoding => category ë°ì´í„°íƒ€ì…ìœ¼ë¡œ ë³€ê²½í•˜ë©´ ordinal encodingì„ í•  ìˆ˜ ìˆë‹¤.
#                    ìˆœì„œê°€ ìˆëŠ” ë°ì´í„°ì— ì¸ì½”ë”©

train["year-month-code"] = train["year-month"].astype("category").cat.codes
test["year-month-code"] = test["year-month"].astype("category").cat.codes
```

ê·¸ë¦¬ê³  í•´ë‹¹ ì»¬ëŸ¼ì„ ì¶”ê°€í•œ í”¼ì²˜ë¡œ í•™ìŠµì„ ì§„í–‰í•˜ê³  ì¼€ê¸€ì— ì œì¶œê¹Œì§€ í•´ë³´ì•˜ë‹¤.(ìì„¸í•œ ë‚´ìš©ì€ ì§€ë‚œ ë‚´ìš© ì°¸ê³ )

![]({{ site.url }}{{ site.baseurl }}/assets/images/2022-11-08-np.log1pì™€ np.expm1, Feature Engineering, í¬ì†Œê°’ íƒìƒ‰/Untitled 2.png)

ì§€ë‚œë²ˆì— ì œì¶œí–ˆë˜ 0.43399ì  ë³´ë‹¤ ì ìˆ˜ê°€ ë–¨ì–´ì¡Œë‹¤(í•´ë‹¹ ê²½ì§„ëŒ€íšŒëŠ” ì ìˆ˜ê°€ ë‚®ì„ ìˆ˜ë¡ ë†’ì€ ìˆœìœ„ë¥¼ ê¸°ë¡í•œë‹¤). year-month columnì€ ì˜¤íˆë ¤ ì˜ˆì¸¡ì´ ë” ë–¨ì–´ì§€ëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.

â—**casualê³¼ Registeredì˜ ì˜ë¯¸**

ì§€ë‚œ ì‹œê°„ì— Casualê³¼ Registeredì— ëŒ€í•œ ì˜ë¯¸ë¥¼ ë‹¤ìŒì— ì•Œì•„ë³´ìê³  ì–¸ê¸‰í–ˆì—ˆë‹¤. casualì€ ë¹„íšŒì›, Registeredì€ íšŒì›ì„ ëœ»í•˜ë©°, íšŒì› + ë¹„íšŒì›ì€ countê°€ ëœë‹¤. ë•Œë¬¸ì— ë‘˜ì€ countì™€ ê²¹ì¹˜ê¸° ë•Œë¬¸ì— ì „ì²˜ë¦¬ë‹¨ê³„ì—ì„œ ì œì™¸ë¥¼ í–ˆì—ˆë‹¤. labelì— íšŒì›ìœ¼ë¡œ í•™ìŠµí•˜ê³  ì˜ˆì¸¡ + labelì— ë¹„íšŒì›ìœ¼ë¡œ í•™ìŠµí•˜ê³  ì˜ˆì¸¡ì„ í•œë‹¤ë©´ ì œì¶œ ì˜ˆì¸¡ê°’ì´ ë  ê²ƒì´ë‹¤. íšŒì›ê³¼ ë¹„íšŒì›ì„ ë”°ë¡œ ì˜ˆì¸¡í•´ì„œ ë”í•´ì£¼ë©´ ìŠ¤ì½”ì–´ê°€ ì•½ê°„ ë” ì˜¬ë¼ê°ˆ ìˆ˜ ìˆë‹¤.

# np.log1pì™€ np.expm1ë¥¼ í™œìš©í•˜ì—¬ ëª¨ë¸êµ¬ì¶•, ì˜ˆì¸¡ ë° í•™ìŠµ ì§„í–‰í•˜ê¸°

### ë°ì´í„° í˜¸ì¶œ

ë§¤ë²ˆ ê²½ë¡œë¥¼ ì…ë ¥í•˜ëŠ” ê²ƒì€ ìˆ˜ê³ ë¡­ê¸° ë•Œë¬¸ì— ê²½ë¡œë¥¼ ì„¤ì •í•´ì£¼ëŠ” ëª…ë ¹ì–´ë¥¼ í• ë‹¹í•œë‹¤.

```python
base_path = "data/bike/"
train = pd.read_csv(f"{base_path}/train.csv")
test = pd.read_csv(f"{base_path}/test.csv")
```

ğŸ’¡ **ê²½ë¡œì— ëŒ€í•œ íŒ**

ìƒëŒ€ê²½ë¡œëŠ” í˜„ì¬ ê²½ë¡œë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•˜ëŠ” ê²½ë¡œ ì˜ˆ) ./ í˜„ì¬ê²½ë¡œë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ../ ìƒìœ„ ê²½ë¡œë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.
ì ˆëŒ€ê²½ë¡œëŠ” ì „ì²´ ê²½ë¡œë¥¼ ë‹¤ ì§€ì •í•˜ëŠ” ê²½ë¡œ ì˜ˆ) ìœˆë„ìš° C: ë¶€í„° ì‹œì‘í•˜ëŠ” ê²½ë¡œì…ë‹ˆë‹¤.
í˜„ì¬ ê²½ë¡œì—ì„œ ./ ì“°ëŠ” ê²ƒê³¼ ì•„ë¬´ê²ƒë„ ì•ˆ ì“°ëŠ”ê²ƒê³¼ ê°™ì€ ìœ„ì¹˜ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

### ì „ì²˜ë¦¬

ì§€ë‚œ ì‹œê°„ê³¼ ê°™ì´ datetimeì„ ì—°,ì›”,ì¼,ì‹œê°„ìœ¼ë¡œ ë‚˜ëˆ ì£¼ë„ë¡ í•œë‹¤.

```python
train["datetime"] = pd.to_datetime(train["datetime"])

train["year"] = train["datetime"].dt.year
train["month"] = train["datetime"].dt.month
train["day"] = train["datetime"].dt.day
train["hour"] = train["datetime"].dt.hour
train["minute"] = train["datetime"].dt.minute
train["second"] = train["datetime"].dt.second
train["dayofweek"] = train["datetime"].dt.dayofweek

# ì˜ ì§„í–‰ë˜ì—ˆëŠ”ì§€ í™•ì¸ì„ í•˜ë„ë¡ í•œë‹¤.
print(train.shape)
train[['datetime', 'year', 'month', 
       'day', 'hour','minute', 
       'second', "dayofweek"]].head()
```

![]({{ site.url }}{{ site.baseurl }}/assets/images/2022-11-08-np.log1pì™€ np.expm1, Feature Engineering, í¬ì†Œê°’ íƒìƒ‰/Untitled 3.png)

testë„ ë§ˆì°¬ê°€ì§€ë¡œ ë™ì¼í•˜ê²Œ ì§„í–‰í•´ì¤€ë‹¤.

```python
test["year"] = test["datetime"].dt.year
test["month"] = test["datetime"].dt.month
test["day"] = test["datetime"].dt.day
test["hour"] = test["datetime"].dt.hour
test["minute"] = test["datetime"].dt.minute
test["second"] = test["datetime"].dt.second
test["dayofweek"] = test["datetime"].dt.dayofweek

print(test.shape)
test[['datetime', 'year', 'month', 
       'day', 'hour','minute', 
       'second', 'dayofweek']].head()
```

![]({{ site.url }}{{ site.baseurl }}/assets/images/2022-11-08-np.log1pì™€ np.expm1, Feature Engineering, í¬ì†Œê°’ íƒìƒ‰/Untitled 4.png)

ì§€ë‚œ ë‚´ìš©ì„ í™•ì¸í•˜ë©´ ë‹¤ë¥¸ì ì´ í•œ ê°€ì§€ ìˆëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤. ë°”ë¡œ `dayofweek`í•­ëª©ì´ ì¶”ê°€ë˜ì—ˆë‹¤. [dt ì ‘ê·¼ìì—ì„œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥](https://pandas.pydata.org/docs/reference/series.html#datetimelike-properties) ë•ì— ì¼ì¼ì´ í•¨ìˆ˜ë¥¼ ì…ë ¥í•˜ì§€ ì•Šì•„ë„ ëœë‹¤. ìš”ì¼ì´ ì¤‘ìš”í•œ ì—­í• ì„ í•˜ê¸°ì— ì¶”ê°€í•˜ë„ë¡ í•œë‹¤.

### EDA

KDE plotì— logë¥¼ ì·¨í•˜ëŠ” ì´ìœ ?

- logë¥¼ countê°’ì— ì ìš©í•˜ê²Œ ë˜ë©´ í•œìª½ì— ë„ˆë¬´ ë¾°ì¡±í•˜ê²Œ ìˆë˜ ë¶„í¬ê°€ ì¢€ ë” ì™„ë§Œí•œ ë¶„í¬ê°€ ëœë‹¤.
- ë°ì´í„°ì— ë”°ë¼ ì¹˜ìš°ì¹˜ê³ (skewed) ë¾°ì¡±í•œ ë¶„í¬ê°€ ì •ê·œë¶„í¬ì— ê°€ê¹Œì›Œì§€ê¸°ë„ í•œë‹¤.
- logë¥¼ ì·¨í•œ ê°’ì„ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ì´ìƒì¹˜ì—ë„ ëœ ë¯¼ê°í•˜ê²Œ ëœë‹¤.

ì •ê·œë¶„í¬ë¥¼ ë§Œë“œëŠ” ì´ìœ ?

- ë¨¸ì‹ ëŸ¬ë‹ì´ë‚˜ ë”¥ëŸ¬ë‹ì— ì¢‹ì€ ì„±ëŠ¥ì„ ë‚´ì¤€ë‹¤.
- ê°’ì„ ë³¼ ë•Œ í•œìª½ì— ë„ˆë¬´ ì¹˜ìš°ì³ì ¸ ìˆê³  ë¾°ì¡±í•˜ë‹¤ë©´ íŠ¹ì„±ì„ ì œëŒ€ë¡œ í•™ìŠµí•˜ê¸°ê°€ ì–´ë µê¸° ë•Œë¬¸ì— ì •ê·œë¶„í¬ë¡œ ë˜ì–´ ìˆë‹¤ë©´ íŠ¹ì„±ì„ ê³ ë¥´ê²Œ í•™ìŠµí•  ìˆ˜ ìˆëŠ” íš¨ê³¼ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.

```python
fig, axes = plt.subplots(nrows = 1, ncols = 2, figsize = (12,3))

# count - kdeplot
sns.kdeplot(train["count"], ax = axes[0])

# count log1p - kdeplot
# log1p : logì— 1ì„ ë”í•´ì£¼ëŠ” ê¸°ëŠ¥. 1ì„ ë”í•´ì£¼ëŠ” ì´ìœ ëŠ” logì— ë“¤ì–´ê°€ëŠ” ê°’ì´ (-)ì´ë©´ yê°’ì´ ìŒìˆ˜ë¡œ ë¬´í•œëŒ€ë¡œ ê°€ê¸° ë•Œë¬¸.
#         train["count_log1p"] = np.log(train["count"] + 1)
sns.kdeplot(np.log1p(train["count"]), ax = axes[1])
```

![]({{ site.url }}{{ site.baseurl }}/assets/images/2022-11-08-np.log1pì™€ np.expm1, Feature Engineering, í¬ì†Œê°’ íƒìƒ‰/Untitled 5.png)

ë¡œê·¸í•¨ìˆ˜ë¥¼ ì·¨í•œ ê°’ì„ columnì— ë„£ì–´ì£¼ë„ë¡ í•œë‹¤.

```python
train["count_log1p"] = np.log(train["count"]+1)
```

ê·¸ë¦¬ê³  ì§€ìˆ˜í•¨ìˆ˜ë¥¼ ì·¨í–ˆì„ ë•Œì˜ ê°’ë„ columnì— ë„£ì–´ì£¼ê³  ì˜ ì ìš©ë˜ì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤.

ğŸ’¡ **ë¡œê·¸í•¨ìˆ˜ì™€ ì§€ìˆ˜í•¨ìˆ˜ tip**

- np.exp ëŠ” ì§€ìˆ˜í•¨ìˆ˜.
- np.logë¡œ ë¡œê·¸ë¥¼ ì·¨í–ˆë˜ ê°’ì„ ë‹¤ì‹œ ì›ë˜ì˜ ê°’ìœ¼ë¡œ ë³µì›í•  ìˆ˜ ìˆë‹¤.
- logë¥¼ ì·¨í•  ë•ŒëŠ” 1ì„ ë”í•˜ê³  ë¡œê·¸ë¥¼ ì·¨í–ˆëŠ”ë° ì§€ìˆ˜í•¨ìˆ˜ë¥¼ ì ìš©í•  ë•ŒëŠ” ë°˜ëŒ€ì˜ ìˆœì„œëŒ€ë¡œ ë³µì›í•´ì•¼ ìˆœì„œê°€ ë§ëŠ”ë‹¤.
- np.expë¡œ ì§€ìˆ˜í•¨ìˆ˜ë¥¼ ì ìš©í•˜ê³  -1 ì„ í•´ì£¼ì–´ì•¼ ë¡œê·¸ë¥¼ ì·¨í–ˆë˜ ìˆœì„œë¥¼ ë³µì›í•´ ì£¼ê²Œ ëœë‹¤.
- np.expm1ì€ ì§€ìˆ˜í•¨ìˆ˜ë¥¼ ì ìš©í•˜ê³  -1ì„ í•´ì£¼ëŠ” ìˆœì„œë¡œ ë˜ì–´ìˆë‹¤.
- `count == np.expm1(np.log1p())` ê°™ì€ ê°’ì´ë‹¤.

```python
train["count_expm1"] = np.exp(train["count_log1p"]) - 1
train[["count", "count_log1p", "count_expm1"]]
```

![]({{ site.url }}{{ site.baseurl }}/assets/images/2022-11-08-np.log1pì™€ np.expm1, Feature Engineering, í¬ì†Œê°’ íƒìƒ‰/Untitled 6.png)

`"count_log1p"`ì—ì„œ ë¡œê·¸ì²˜ë¦¬ë˜ì—ˆë˜ ê°’ì´, `"count_expml"`ì˜ ì§€ìˆ˜í•¨ìˆ˜ì²˜ë¦¬ë¡œ ê°’ì´ ë³µì›ëœ ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.

```python
# count, log1p, expm1
fig, axes = plt.subplots(nrows = 1, ncols = 3, figsize = (12,3))

# count - kdeplot
sns.kdeplot(train["count"], ax = axes[0])
# count log1p - kdeplot
sns.kdeplot(train["count_log1p"], ax = axes[1])
# count expm1 - kdeplot
sns.kdeplot(train["count_expm1"], ax = axes[2])
```

![]({{ site.url }}{{ site.baseurl }}/assets/images/2022-11-08-np.log1pì™€ np.expm1, Feature Engineering, í¬ì†Œê°’ íƒìƒ‰/Untitled 7.png)

describe ê°’ë„ í™•ì¸í•´ë³´ë¡ í•˜ì.

```python
train[["count", "count_log1p", "count_expm1"]].describe()
```

![]({{ site.url }}{{ site.baseurl }}/assets/images/2022-11-08-np.log1pì™€ np.expm1, Feature Engineering, í¬ì†Œê°’ íƒìƒ‰/Untitled 8.png)

ğŸ¤” **ì™œ countì— logë¥¼ ì·¨í•˜ê³  ë‹¤ì‹œ ì§€ìˆ˜í•¨ìˆ˜ë¡œ ë³µì›í•˜ì˜€ë‚˜?**

- log ê°’ìœ¼ë¡œ ë³€í™˜ì‹œì¼œ ì •ê·œë¶„í¬ì— ê°€ê¹Œìš´ í˜•íƒœë¡œ ë§Œë“¤ì–´ ì˜ˆì¸¡í•˜ì—¬ ë¨¸ì‹ ëŸ¬ë‹ì˜ ê¸°ëŠ¥ì„ í–¥ìƒì‹œí‚¤ê³ , log í˜•íƒœë¡œ ë‚˜ì˜¨ ì˜ˆì¸¡ê°’ì„ ë³µì›í•˜ê¸° ìœ„í•´

## í•™ìŠµ, ì˜ˆì¸¡ ë°ì´í„°ì…‹ ë§Œë“¤ê¸°

í•™ìŠµê³¼ ì˜ˆì¸¡ ë°ì´í„°ì…‹ì„ ë§Œë“¤ë„ë¡ í•˜ì.

```python
label_name = "count_log1p"
feature_names = ['holiday', 'workingday', 'weather', 'temp',
       'atemp', 'humidity', 'windspeed','year','hour','dayofweek']

X_train = train[feature_names]
X_test = test[feature_names]
y_train = train[label_name]
```

## ë¨¸ì‹ ëŸ¬ë‹ ì•Œê³ ë¦¬ì¦˜

íšŒê·€ìœ í˜•ì´ê¸°ì— `RandomForestRegressor`ë¥¼ ì‚¬ìš©í•˜ë„ë¡ í•˜ì.

```python
from sklearn.ensemble import RandomForestRegressor

model = RandomForestRegressor(random_state= 42, n_jobs = -1)
```

### **í•˜ì´í¼íŒŒë¼ë¯¸í„° ì„¤ì •**

```python
from sklearn.model_selection import RandomizedSearchCV

param_distributions = {"max_depth" : np.random.randint(3, 10, 10), 
                       "max_features" : np.random.uniform(0, 1, 10)}

reg = RandomizedSearchCV(model, param_distributions = param_distributions
                         , n_iter = 10, cv = 5, 
                         verbose = 2, n_jobs = -1, random_state = 42, 
                         scoring = "neg_root_mean_squared_error" )

reg.fit(X_train, y_train)
```

scoreë¥¼ `neg_root_mean_squared_error`ë¡œ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” countê°’ì— ì´ë¯¸ logë¥¼ ì·¨í•´ì„œì´ë‹¤. ë”°ë¼ì„œ ë‹¤ë¥¸ íšŒê·€ë¶„ì„ê°’ ì¤‘ ì•ˆì •ì ì¸ ì„±ëŠ¥ì„ ë‚´ëŠ” RMSEë¥¼ ì‚¬ìš©í•˜ë„ë¡ í•œë‹¤.

```python
reg.best_estimator_
ê²°ê³¼ê°’ : RandomForestRegressor(max_depth=9, max_features=0.9133520295351394, n_jobs=-1,
                      random_state=42)

reg.best_score_
ê²°ê³¼ê°’ : -0.5233237452230891
```

ê²°ê³¼ê°’ì´ ìŒìˆ˜ë¡œ ë‚˜ì˜¤ëŠ” ì´ìœ ëŠ” `neg_root_mean_squared_error` ì˜ ê¸°ëŠ¥ì´ë‹¤. í™•ì‹¤í•˜ì§€ëŠ” ì•Šì§€ë§Œ, ì•„ë§ˆë„ ì •ë ¬ì„ ìœ„í•´ ì•ì— ìŒìˆ˜ë¥¼ ë¶™í˜€ì¤€ê²Œ ì•„ë‹ê¹Œ ì‹¶ë‹¤. ìœ„ ê²°ê³¼ê°’ì˜ ì ˆëŒ€ê°’ì„ ì·¨í•˜ë©´ RMSLE ê°’ì´ ëœë‹¤.

```python
rmsle = abs(reg.best_score_)
```

ëœë¤ì„œì¹˜ë¡œ ì°¾ì€ ìµœì ì˜ ê°’ì„ ëª¨ë¸ë¡œ ì„¤ì •í•œ ë’¤, í•™ìŠµì„ ì§„í–‰í•œë‹¤.

```python
best_model = reg.best_estimator_
```

ê·¸ë¦¬ê³  í‰ê°€ë¥¼ ìœ„í•´ì„œ cross_val_predictë„ ê³„ì‚°í•´ì£¼ë„ë¡ í•˜ì.

```python
from sklearn.model_selection import cross_val_predict

y_valid_pred = cross_val_predict(best_model, X_train, y_train, cv=5, n_jobs=-1,verbose=2)
```

### í‰ê°€

í‰ê°€ ìˆ˜ì‹ì— ëŒ€í•œ í¬ìŠ¤íŒ…ì€ ì°¨í›„ì— ì—…ë¡œë“œ ë  ì˜ˆì •ì´ë‹¤. ì—…ë¡œë“œê°€ ë˜ë©´ í•´ë‹¹ìë¦¬ì— ë„˜ì–´ê°ˆ ìˆ˜ ìˆëŠ” ë§í¬ë¥¼ ê±¸ì–´ë‘ë„ë¡ í•˜ê² ë‹¤.

```python
# MSE
from sklearn.metrics import mean_squared_error

mean_squared_error(y_train, y_valid_pred)
ê²°ê³¼ê°’ : 0.29679788125210566

# RMSE
mean_squared_error(y_train, y_valid_pred) ** (0.5)
```

### í•™ìŠµê³¼ ì˜ˆì¸¡

RandomSearchCVë¥¼ í†µí•´ì„œ ì°¾ì€ ìµœì ì˜ íŒŒë¼ë¯¸í„°ê°’ì´ ì ìš©ëœ ëª¨ë¸ì— í•™ìŠµì„ ì‹œí‚¤ê³  ì˜ˆì¸¡ì„ ì§„í–‰ì‹œì¼°ë‹¤.

```python
y_predict = best_model.fit(X_train, y_train).predict(X_test)
```

ìš°ë¦¬ê°€ êµ¬í•œ `y_predict` ì˜ˆì¸¡ ê°’ì€ ì›í™œí•œ í•™ìŠµê³¼ì •ì„ ìœ„í•´ log ì²˜ë¦¬ë¥¼ í•œ ìˆ˜ì¹˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ í•™ìŠµí•˜ê³  ì˜ˆì¸¡í•œ ê°’ì´ê¸° ë•Œë¬¸ì— ì§€ìˆ˜í•¨ìˆ˜ì²˜ë¦¬`np.exp1`ë¥¼ í•´ì„œ ì›ë˜ ìˆ˜ë¡œ ë³€í™˜ì‹œì¼œ countê°’ì— ì ìš©ì‹œì¼œì•¼ í•œë‹¤.

```python
 y_exp = np.expm1(y_predict)
```

### ì œì¶œ

[ì§€ë‚œ ì‹œê°„](https://junstar21.github.io/til/titanic-%ED%95%98%EC%9D%B4%ED%8D%BC%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0-%ED%8A%9C%EB%8B%9D,-Bike-Shareing-Demand-%EC%8B%A4%EC%8A%B5/)ê³¼ ë™ì¼í•˜ê¸° ë•Œë¬¸ì— ìƒëµí•˜ë„ë¡ í•˜ê² ë‹¤.

![]({{ site.url }}{{ site.baseurl }}/assets/images/2022-11-08-np.log1pì™€ np.expm1, Feature Engineering, í¬ì†Œê°’ íƒìƒ‰/Untitled 9.png)

RandomSearchCVë¥¼ ë‘ë²ˆì„ ì‹œí–‰í•˜ê³  ê°ê° ì œì¶œí•œ ê²°ê³¼, ì ìˆ˜ê°€ ë‹¤ë¥¸ ì ì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤. ì´ëŠ” RandomSerachCVì—ì„œ ì„¤ì •í•œ `param_distributions` ì— ì‚¬ìš©ëœ ê°’ë“¤ì´ ëœë¤í•œ ë²”ìœ„ ë‚´ì—ì„œ ì‚¬ìš©ë˜ì—ˆê¸° ë•Œë¬¸ì´ë‹¤.

ë” ë†’ì€ ì ìˆ˜ë¥¼ í™•ë³´í•˜ê¸° ìœ„í•´ RandomSearchCVì˜ `max depth`ë¥¼ `np.random.randint(3, 20, 10)`ìœ¼ë¡œ, `max_features`ë¥¼ `np.random.uniform(0.7, 1, 10)`ìœ¼ë¡œ íƒìƒ‰ ë²”ìœ„ë¥¼ ë” ë„“í˜€ì£¼ê³  ë‹¤ì‹œ ì‹¤í–‰í•˜ì˜€ë‹¤.

![]({{ site.url }}{{ site.baseurl }}/assets/images/2022-11-08-np.log1pì™€ np.expm1, Feature Engineering, í¬ì†Œê°’ íƒìƒ‰/Untitled 10.png)

ë³€ê²½ í›„ ì‹¤í–‰ì„ í•˜ê³  ì œì¶œí•œ ê²°ê³¼ ì ìˆ˜ê°€ ëˆˆì— ë„ê²Œ ê°œì„ ëœ ëª¨ìŠµì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

ğŸ’¡ **EDAì™€ ëª¨ë¸ë§ì— ëŒ€í•œ íŒ**

- í”¼ì²˜ë¥¼ ì¶”ê°€í•˜ê³  ì œì™¸í•˜ëŠ” ê²ƒì€ EDA ë¥¼ í•˜ê³  ì ìš©í•´ ë³´ëŠ” ê²ƒë„ ì¤‘ìš”í•˜ì§€ë§Œ, ì§ì ‘ ëª¨ë¸ì— ì¶”ê°€í•˜ê³  ì œê±°í•´ ë³´ë©´ì„œ ê²€ì¦í•´ ë³´ëŠ” ê²ƒë„ ì¢‹ìŠµë‹ˆë‹¤.

# House Prices ê²½ì§„ëŒ€íšŒ

ì œê³µí•˜ëŠ” ë°ì´í„°ì…‹ì— ìˆëŠ” ì£¼íƒê°€ê²©ì„ ì˜ˆì¸¡í•˜ê¸° ìœ„í•œ ë³€ìˆ˜ë¡œëŠ” ë‚´ì™¸ê´€ í’ˆì§ˆ, í™”ì¥ì‹¤ì˜ ìˆ˜, ë°©ì˜ ê°œìˆ˜, ìˆ˜ì˜ì¥ ì—¬ë¶€, ì§€ë¶•, ì–¸ì œ ê±´ì¶•ì´ ë˜ì—ˆëŠ”ì§€ ë“±ì˜ ë°ì´í„°ê°€ ìˆë‹¤. ì´ ë°ì´í„°ì…‹ì„ í†µí•´ EDAë¥¼ í•´ë³´ê³  í”¼ì²˜ì—”ì§€ë‹ˆì–´ë§ì„ í†µí•´ ì–´ë–¤ê²Œ ì‹ í˜¸ê°€ ë˜ê³  ì–´ë–¤ê²Œ ì†ŒìŒì´ ë ì§€ ì•Œì•„ë³´ë„ë¡ í•œë‹¤. ì—¬ê¸°ì—ì„œëŠ” ìš°ì„  í”¼ì²˜ì—”ì§€ë‹ˆì–´ë§ì˜ ë‹¤ì–‘í•œ ê¸°ë²•ì„ ìš°ì„ ì ìœ¼ë¡œ ì•Œì•„ë³´ì.

## **Feature Engineeringì„ ìœ„í•œ ê¸°ì´ˆ ê°œë…**

### Feature Engineeringì˜ ë¶„ë¥˜

| ë¶„ë¥˜ëª… | ì •ì˜ |
| --- | --- |
| íŠ¹ì„± ì„ íƒ(Feature Selection) | í•´ë‹¹ ë¶„ì•¼(Domain) ì „ë¬¸ê°€ì˜ ì§€ì‹ì´ë‚˜, íŠ¹ì„±ì˜ ì¤‘ìš”ë„(Feature Importance)ì— ë”°ë¼ ì¼ë¶€ íŠ¹ì„±ì„ ì„ íƒí•¨. |
| íŠ¹ì„± ì¶”ì¶œ(Feature Extraction) | íŠ¹ì„±ë“¤ì˜ ì¡°í•©ìœ¼ë¡œ ì•„ì˜ˆ ìƒˆë¡œìš´ íŠ¹ì„±ì„ ìƒì„±í•˜ëŠ” ê²ƒ(íŒŒìƒë³€ìˆ˜) . ì£¼ì„±ë¶„ ë¶„ì„(PCA)ì™€ ê°™ì€ ê¸°ë²•ì€ íŠ¹ì„± ì¶”ì¶œì— í•´ë‹¹ |
| ë²”ìœ„ ë³€í™˜(Scaling) | ë³€ìˆ˜ì˜ ë¶„í¬ê°€ í¸í–¥ë˜ì–´ ìˆì„ ê²½ìš°(ì •ê·œë¶„í¬ì™€ ê±°ë¦¬ê°€ ë©€ë‹¤), ì´ìƒì¹˜ê°€ ë§ì´ ì¡´ì¬í•  ê²½ìš° ë“± ë³€ìˆ˜ì˜ íŠ¹ì„±ì´ ì˜ ë“œëŸ¬ë‚˜ì§€ ì•Šê³  í™œìš©í•˜ê¸° ì–´ë ¤ìš¸ ê²½ìš° ë³€ìˆ˜ì˜ ë²”ìœ„ë¥¼ ë°”ê¾¸ì–´ì£¼ëŠ” ì‘ì—… |
| ë³€í˜•(Transform) | ê¸°ì¡´ì— ì¡´ì¬í•˜ëŠ” ë³€ìˆ˜ì˜ ì„±ì§ˆì„ ì´ìš©í•´ ìƒˆë¡œìš´ ë³€ìˆ˜ë¥¼ ìƒì„± |
| ë²”ì£¼í™”(Binning) | ì—°ì†í˜• ë³€ìˆ˜ë¥¼ ë²”ì£¼í˜• ë³€ìˆ˜ë¡œ ë³€í™˜í•˜ëŠ” ê²ƒ ex) ì˜ˆë¥¼ ë“¤ì–´ 20~29ì„¸ê¹Œì§€ì˜ ë°ì´í„°ë¥¼ 20ëŒ€ë¡œ ë¬¶ëŠ” ê²ƒ |
| ìˆ«ìí™”(Dummy) | ë²”ì£¼í˜• ë³€ìˆ˜ë¥¼ ì—°ì†í˜• ë³€ìˆ˜ë¡œ ë³€í™˜í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. Categorical Featureë¥¼ Numerical Featureë¡œ ë°”ê¾¸ëŠ” ê²ƒ. |

### Featureì˜ ì¢…ë¥˜

| íƒ€ì… | ì„œë¸Œíƒ€ì… | ì •ì˜ | ì˜ˆì‹œ |
| --- | --- | --- | --- |
| Categorical | Nominal | ì—¬ëŸ¬ ê°€ì§€ë¡œ ë‚˜ë‰˜ê³  ìì—°ì ì¸ ìˆœì„œê°€ ì—†ëŠ” ë²”ì£¼í˜• ë³€ìˆ˜ | ì„±ë³„, ìŒë£Œìˆ˜ ì¢…ë¥˜ |
|  | Ordinal | ì—¬ëŸ¬ ê°€ì§€ë¡œ ë‚˜ë‰˜ê³  ìì—°ì ì¸ ìˆœì„œê°€ ìˆëŠ” ë²”ì£¼í˜• ë³€ìˆ˜ | ì„±ì , ë“±ê¸‰ |
| Numerical | Discrete | ìœ í•œí•˜ê±°ë‚˜ ê°œìˆ˜ë¥¼ í—¤ì•„ë¦´ ìˆ˜ ìˆëŠ” ìˆ«ìí˜• ë³€ìˆ˜ | ë¬¼ê±´ì˜ ê°œìˆ˜,Â í–‰ë™ì˜ íšŸìˆ˜ |
|  | Continuous | ë¬´í•œí•˜ê±°ë‚˜ ê°œìˆ˜ë¥¼ í—¤ì•„ë¦´ ìˆ˜ ì—†ëŠ” ìˆ«ìí˜• ë³€ìˆ˜ | ë¬¼ê±´ì˜ ê°€ê²©, ì‹œê°„ |

### ë°ì´í„°ì…‹ í˜¸ì¶œ

```python
#ë¼ì´ë¸ŒëŸ¬ë¦¬ í˜¸ì¶œ
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns

plt.style.use("ggplot")

# ê²½ë¡œì„¤ì •
# base_pathëŠ” ë³¸ì¸ì´ ë°›ì€ ë°ì´í„°ì˜ í´ë” ìœ„ì¹˜ë¥¼ í™•ì¸ í›„ ë§ê²Œ ë³€ê²½ì‹œì¼œì£¼ë©´ ëœë‹¤.
base_path = "data/"

# ë°ì´í„° ë³€ìˆ˜ í• ë‹¹
train = pd.read_csv(f"{base_path}/train.csv", index_col = "Id")
test = pd.read_csv(f"{base_path}/test.csv", index_col = "Id")
sub = pd.read_csv(f"{base_path}/sample_submission.csv", index_col = "Id")
```

### ë°ì´í„° íƒìƒ‰

```python
train.info()
```

- ê²°ê³¼ê°’
    
    ```
    <class 'pandas.core.frame.DataFrame'>
    Int64Index: 1460 entries, 1 to 1460
    Data columns (total 80 columns):
     #   Column         Non-Null Count  Dtype  
    ---  ------         --------------  -----  
     0   MSSubClass     1460 non-null   int64  
     1   MSZoning       1460 non-null   object 
     2   LotFrontage    1201 non-null   float64
     3   LotArea        1460 non-null   int64  
     4   Street         1460 non-null   object 
     5   Alley          91 non-null     object 
     6   LotShape       1460 non-null   object 
     7   LandContour    1460 non-null   object 
     8   Utilities      1460 non-null   object 
     9   LotConfig      1460 non-null   object 
     10  LandSlope      1460 non-null   object 
     11  Neighborhood   1460 non-null   object 
     12  Condition1     1460 non-null   object 
     13  Condition2     1460 non-null   object 
     14  BldgType       1460 non-null   object 
     15  HouseStyle     1460 non-null   object 
     16  OverallQual    1460 non-null   int64  
     17  OverallCond    1460 non-null   int64  
     18  YearBuilt      1460 non-null   int64  
     19  YearRemodAdd   1460 non-null   int64  
     20  RoofStyle      1460 non-null   object 
     21  RoofMatl       1460 non-null   object 
     22  Exterior1st    1460 non-null   object 
     23  Exterior2nd    1460 non-null   object 
     24  MasVnrType     1452 non-null   object 
     25  MasVnrArea     1452 non-null   float64
     26  ExterQual      1460 non-null   object 
     27  ExterCond      1460 non-null   object 
     28  Foundation     1460 non-null   object 
     29  BsmtQual       1423 non-null   object 
     30  BsmtCond       1423 non-null   object 
     31  BsmtExposure   1422 non-null   object 
     32  BsmtFinType1   1423 non-null   object 
     33  BsmtFinSF1     1460 non-null   int64  
     34  BsmtFinType2   1422 non-null   object 
     35  BsmtFinSF2     1460 non-null   int64  
     36  BsmtUnfSF      1460 non-null   int64  
     37  TotalBsmtSF    1460 non-null   int64  
     38  Heating        1460 non-null   object 
     39  HeatingQC      1460 non-null   object 
     40  CentralAir     1460 non-null   object 
     41  Electrical     1459 non-null   object 
     42  1stFlrSF       1460 non-null   int64  
     43  2ndFlrSF       1460 non-null   int64  
     44  LowQualFinSF   1460 non-null   int64  
     45  GrLivArea      1460 non-null   int64  
     46  BsmtFullBath   1460 non-null   int64  
     47  BsmtHalfBath   1460 non-null   int64  
     48  FullBath       1460 non-null   int64  
     49  HalfBath       1460 non-null   int64  
     50  BedroomAbvGr   1460 non-null   int64  
     51  KitchenAbvGr   1460 non-null   int64  
     52  KitchenQual    1460 non-null   object 
     53  TotRmsAbvGrd   1460 non-null   int64  
     54  Functional     1460 non-null   object 
     55  Fireplaces     1460 non-null   int64  
     56  FireplaceQu    770 non-null    object 
     57  GarageType     1379 non-null   object 
     58  GarageYrBlt    1379 non-null   float64
     59  GarageFinish   1379 non-null   object 
     60  GarageCars     1460 non-null   int64  
     61  GarageArea     1460 non-null   int64  
     62  GarageQual     1379 non-null   object 
     63  GarageCond     1379 non-null   object 
     64  PavedDrive     1460 non-null   object 
     65  WoodDeckSF     1460 non-null   int64  
     66  OpenPorchSF    1460 non-null   int64  
     67  EnclosedPorch  1460 non-null   int64  
     68  3SsnPorch      1460 non-null   int64  
     69  ScreenPorch    1460 non-null   int64  
     70  PoolArea       1460 non-null   int64  
     71  PoolQC         7 non-null      object 
     72  Fence          281 non-null    object 
     73  MiscFeature    54 non-null     object 
     74  MiscVal        1460 non-null   int64  
     75  MoSold         1460 non-null   int64  
     76  YrSold         1460 non-null   int64  
     77  SaleType       1460 non-null   object 
     78  SaleCondition  1460 non-null   object 
     79  SalePrice      1460 non-null   int64  
    dtypes: float64(3), int64(34), object(43)
    memory usage: 923.9+ KB
    ```
    

`info()`ë¥¼ í™•ì¸í•œ ê²°ê³¼, ê²°ì¸¡ì¹˜ê°€ ìˆëŠ” columnsë“¤ì´ ê½¤ë‚˜ ìˆëŠ” ê²ƒì„ í™•ì¸í•˜ì˜€ë‹¤.

### Histplot

```python
train.hist(figsize = (20,10), bins = 50);
```

![]({{ site.url }}{{ site.baseurl }}/assets/images/2022-11-08-np.log1pì™€ np.expm1, Feature Engineering, í¬ì†Œê°’ íƒìƒ‰/Untitled 11.png)

- ë§‰ëŒ€ê°€ ë–¨ì–´ì ¸ìˆëŠ” ë²”ì£¼í˜• ê°’ìœ¼ë¡œ ë³´ì´ëŠ” ìë£Œê°€ ë§ë‹¤.
- 2000ë…„ëŒ€ì— ì§€ì–´ì§„ ì§‘ì´ ë§ë‹¤.
- YearRemodAddì˜ ë°ì´í„°ëŠ” ì–‘ê·¹ë‹¨ì— ëª°ë ¤ìˆë‹¤.

### ê²°ì¸¡ì¹˜ íƒìƒ‰

columnsìˆ˜ê°€ ë§ê³  ê·¸ë§Œí¼ ê²°ì¸¡ì¹˜ë¥¼ ê°€ì§„ columnsê°€ ë§ê¸°ì— ì•„ë˜ì™€ ê°™ì´ ì½”ë“œë¥¼ ì‘ì„±í•˜ì—¬ ê²°ì¸¡ì¹˜ê°€ ìˆëŠ” columnsë§Œ í™•ì¸í•œë‹¤.

```python
train_null = train.isnull().sum()
train_sum = train_null[train_null > 0].sort_values(ascending = False)
```

- ê²°ê³¼ê°’
    
    ```python
    PoolQC          1453
    MiscFeature     1406
    Alley           1369
    Fence           1179
    FireplaceQu      690
    LotFrontage      259
    GarageType        81
    GarageYrBlt       81
    GarageFinish      81
    GarageQual        81
    GarageCond        81
    BsmtExposure      38
    BsmtFinType2      38
    BsmtFinType1      37
    BsmtCond          37
    BsmtQual          37
    MasVnrArea         8
    MasVnrType         8
    Electrical         1
    dtype: int64
    ```
    

```python
test_null = test.isnull().sum()
test_sum = test_null[test_null > 0].sort_values(ascending = False)
```

- ê²°ê³¼ê°’
    
    ```python
    PoolQC          1456
    MiscFeature     1408
    Alley           1352
    Fence           1169
    FireplaceQu      730
    LotFrontage      227
    GarageCond        78
    GarageYrBlt       78
    GarageQual        78
    GarageFinish      78
    GarageType        76
    BsmtCond          45
    BsmtExposure      44
    BsmtQual          44
    BsmtFinType1      42
    BsmtFinType2      42
    MasVnrType        16
    MasVnrArea        15
    MSZoning           4
    BsmtFullBath       2
    BsmtHalfBath       2
    Functional         2
    Utilities          2
    GarageCars         1
    GarageArea         1
    TotalBsmtSF        1
    KitchenQual        1
    BsmtUnfSF          1
    BsmtFinSF2         1
    BsmtFinSF1         1
    Exterior2nd        1
    Exterior1st        1
    SaleType           1
    dtype: int64
    ```
    

ê²°ì¸¡ì¹˜ì˜ í•©ê³„ì™€ ë¹„ìœ¨ì„ í•œëˆˆì— ë³´ê¸° ìœ„í•´ì„œ concat ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê¸°ë¡œ í•˜ì˜€ë‹¤.

```python
train_na_mean = train.isnull().mean() * 100
pd.concat([train_null, train_na_mean], axis = 1).loc[train_sum.index]
```

- ê²°ê³¼ê°’
    
![]({{ site.url }}{{ site.baseurl }}/assets/images/2022-11-08-np.log1pì™€ np.expm1, Feature Engineering, í¬ì†Œê°’ íƒìƒ‰/Untitled 12.png)
    

```python
test_na_mean = test.isnull().mean() * 100
pd.concat([test_null, test_na_mean], axis = 1).loc[test_sum.index]
```

- ê²°ê³¼ê°’
    
![]({{ site.url }}{{ site.baseurl }}/assets/images/2022-11-08-np.log1pì™€ np.expm1, Feature Engineering, í¬ì†Œê°’ íƒìƒ‰/Untitled 13.png)
    

### ì´ìƒì¹˜ íƒìƒ‰

ì´ìƒì¹˜ê°€ í•™ìŠµì„ ë°©í•´í•œë‹¤ëŠ” ì˜ë¯¸ê°€ ë¬´ì—‡ì¼ê¹Œ? â‡’ ì´ìƒì¹˜ë¡œ ì¸í•´ ì¼ë°˜í™”ê°€ ì–´ë ¤ì›Œ ì§€ëŠ” ê²ƒ

ìš°ì„  ìš°ë¦¬ê°€ ì œì¶œí•´ì•¼í•  `SalePrice`ì˜ ì´ìƒì¹˜ë¥¼ í™•ì¸í•´ë³´ë¡ í•˜ì.

```python
train["SalePrice"].describe()

ê²°ê³¼ê°’ : 
count      1460.000000
mean     180921.195890
std       79442.502883
min       34900.000000
25%      129975.000000
50%      163000.000000
75%      214000.000000
max      755000.000000
Name: SalePrice, dtype: float64

sns.scatterplot(data = train, x = train.index, y = "SalePrice")
plt.axhline(500000, c = "k", ls = ":")
```

![]({{ site.url }}{{ site.baseurl }}/assets/images/2022-11-08-np.log1pì™€ np.expm1, Feature Engineering, í¬ì†Œê°’ íƒìƒ‰/Untitled 14.png)

`SalePrice`ì˜ 500000ì´ìƒì„ ë³´ë©´ íŠ€ëŠ” ê°’ë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. 

### í¬ì†Œê°’ íƒìƒ‰

- í¬ì†Œê°’ì´ ë°œìƒí•˜ëŠ” ì´ìœ  : ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ë‹¤ ë³´ë©´ ìì—°ìŠ¤ëŸ½ê²Œ ë¹„ìœ¨ì´ ë†’ì€ ê°’ê³¼ ë‚®ì€ ê°’ì´ ë°œìƒí•œë‹¤.
- í¬ì†Œê°’ì„ ì°¾ëŠ” ì´ìœ 
    - ë°ì´í„° í•´ì„ì„ ì–´ë µê²Œ í•˜ê³ , ë¨¸ì‹ ëŸ¬ë‹ì˜ ì„±ëŠ¥ì„ ë‚®ì¶”ëŠ” ìš”ì¸
    - ì¤‘ìš”í•œ ê²ƒì€ ì „ì²´ ë°ì´í„°ì˜ ê²½í–¥ì„ íŒŒì•…
    - í¬ì†Œê°’ì´ ë§ìœ¼ë©´ ê²½í–¥ì„ íŒŒì•…í•˜ê¸°ê°€ ì–´ë ¤ì›€
- í¬ì†Œê°’ì„ ì°¾ì•„ì„œ ì ì ˆíˆ ì²˜ë¦¬í•¨ìœ¼ë¡œì¨ ì „ì²´ ê²½í–¥ì´ ë” ëšœë ·í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

train data setì—ì„œ object íƒ€ì…ì¸ columnsì˜ nunique ê°’ì„ 10ê°œë§Œ í˜¸ì¶œí•˜ê¸°ë¡œ í•œë‹¤.

```python
train.select_dtypes(include = "object").nunique().nlargest(10)

ê²°ê³¼ê°’ :
Neighborhood    25
Exterior2nd     16
Exterior1st     15
Condition1       9
SaleType         9
Condition2       8
HouseStyle       8
RoofMatl         8
Functional       7
RoofStyle        6
dtype: int64
```

`Neighborhood`ê°€ ê°€ì¥ í¬ê¸° ë•Œë¬¸ì— `Neighborhood`ì— `value_counts()`ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬ ì–´ë–¤ ê°’ì´ ìˆëŠ”ì§€ í™•ì¸í•´ì¤€ë‹¤.

```python
# Neighborhood - value_counts
ncounts = train["Neighborhood"].value_counts()
ncounts
```

- ê²°ê³¼ê°’
    
    ```python
    NAmes      225
    CollgCr    150
    OldTown    113
    Edwards    100
    Somerst     86
    Gilbert     79
    NridgHt     77
    Sawyer      74
    NWAmes      73
    SawyerW     59
    BrkSide     58
    Crawfor     51
    Mitchel     49
    NoRidge     41
    Timber      38
    IDOTRR      37
    ClearCr     28
    StoneBr     25
    SWISU       25
    MeadowV     17
    Blmngtn     17
    BrDale      16
    Veenker     11
    NPkVill      9
    Blueste      2
    Name: Neighborhood, dtype: int64
    ```
    

ë‚˜íƒ€ë‚¸ valueë“¤ì„ ì‹œê°í™”í•´ì„œ ë³´ê¸°ë¡œ í•œë‹¤.

```python
# countplot
sns.countplot(data = train, y = "Neighborhood", order = ncounts.index )
```

![]({{ site.url }}{{ site.baseurl }}/assets/images/2022-11-08-np.log1pì™€ np.expm1, Feature Engineering, í¬ì†Œê°’ íƒìƒ‰/Untitled 15.png)
